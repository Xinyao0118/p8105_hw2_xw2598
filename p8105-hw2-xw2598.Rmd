---
title: "p8105_hw2_xw2598"
author: "Xinyao Wu"
date: "2018-10-02"
output: github_document
---
##problem1

```{r}
library(tidyverse)
nyc_data = read.csv("./data files/NYC_Transit_Subway_Entrance_And_Exit_Data.csv")%>% 
  #data clean
janitor::clean_names() %>% 
  #retain specific variables 
select(line:entry,vending,ada) %>% 
  #convert the variable entry from character to logic
 #gather(key="routes_served", value = "route_value",route1:route11 ) %>% 
mutate(
     entry=as.character(entry),
     entry = replace(entry,entry =="YES", "TRUE"),
       entry =replace(entry,entry =="NO","FALSE"),
       entry = as.logical(entry)
)
```

This dataset contains variables `names(nyc_data) `

my data cleaning steps: 1.change the variables names. 2.select the specific variables according to the requirement. 3.change the type of the data in "entry"

The dimension of the resulting dataset is `nrow(nyc_data)` rows * `ncol(nyc_data)` columns

These data is not tidy enough, I suggest to gather all of the routes into one variable so I put related codes in the comment lines.

```{r}
##The number of distinct stations:
#select the variables that can identify stations
n_station = select(nyc_data,station_name,route1:route11)
nrow(distinct(n_station))
#The number of stations that are ADA compliant
ada_compliant = filter(nyc_data, ada=="TRUE") 
  nrow(ada_compliant)
#

```
There are 457 distinct stations, and there are 468 stations that are ADA compliant.


```{r}
#The proportion of station entrances / exits without vending allow entrance
nrow(filter(nyc_data,vending=="NO"))/nrow(nyc_data)
#
```

Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?
```{r}
#Reformat data so that route number and route name are distinct variables
new_nyc_data = nyc_data %>% 
gather(key="route_name", value = "route_number",route1:route11 ) %>% 
#Number of Dinstinct stations that serve the A train
select(station_name, route_name, route_number,ada) %>% 
  #filte A train
  filter(route_number == "A") 
  #count distinct station serving A train
  A_station = distinct(select(new_nyc_data,-ada)) 
  nrow(A_station)
# carculate number  of  ADA compliant in stations serving A train
  nrow(filter(new_nyc_data,ada=="TRUE"))
# carculate proportion of  ADA compliant in stations serving A train
  nrow(filter(new_nyc_data,ada=="TRUE"))/nrow(new_nyc_data)
```
56 distinct stations that serve the A train
Of the stations that serve the A train, the number of ada compliant stations serving A train is , and the proportion of ADA compliant is 0.3919414.

##problem 2




